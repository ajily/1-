
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	МассивТиповДинамическогоСписка = Новый Массив;  МассивТиповДинамическогоСписка.Добавить(Тип("ДинамическийСписок"));  ОписаниеТиповДинамическогоСписка = Новый ОписаниеТипов(МассивТиповДинамическогоСписка);    МассивДобавляемыхРеквизитов = Новый Массив;  МассивДобавляемыхРеквизитов.Добавить(Новый РеквизитФормы("РеквизитСписокНоменклатура",       // Имя                                 ОписаниеТиповДинамическогоСписка,   // Тип                                ,                                   // Путь                                "Список номенклатура",              // Заголовок                                Ложь));                             // Сохраняемые данные  ИзменитьРеквизиты(МассивДобавляемыхРеквизитов);    // Настроим динамический список  РеквизитФормыСписокНоменклатура = ЭтаФорма["РеквизитСписокНоменклатура"];  РеквизитФормыСписокНоменклатура.ТекстЗапроса = "ВЫБРАТЬ                |  СправочникНоменклатура.Наименование КАК Наименование,                |  СправочникНоменклатура.Код КАК Код,                |  СУММА(ОстаткиТоваров.КоличествоТоваров) КАК Количество                |ИЗ                |  Справочник.Номенклатура КАК СправочникНоменклатура                |    ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ОстаткиТоваров КАК ОстаткиТоваров                |    ПО (ОстаткиТоваров.Номенклатура = СправочникНоменклатура.Ссылка)                |                |СГРУППИРОВАТЬ ПО                |  СправочникНоменклатура.Наименование,                |  СправочникНоменклатура.Код";      //РеквизитФормыСписокНоменклатура.ТекстЗапроса =  "ВЫБРАТЬ  //                        |  Номенклатура.Наименование КАК Наименование,  //                        |  Номенклатура.Код КАК Код  //                        |ИЗ  //                        |  Справочник.Номенклатура КАК Номенклатура";     // Назначаем основную таблицу,   // если хотим иметь стандартные команды справочника  // (добавить, скопировать, пометить на удаление итп)  РеквизитФормыСписокНоменклатура.ОсновнаяТаблица = "Справочник.Номенклатура";      // Вывести динамический список на форму  ЭлементДинамическийСписок = Элементы.Добавить("ЭлементСписокНоменклатура", Тип("ТаблицаФормы"));  ЭлементДинамическийСписок.ПутьКДанным = "РеквизитСписокНоменклатура";     // Создать колонки и вывести в динамический список  НоваяКолонкаТаблицы = Элементы.Добавить("КолонкаНаименование", Тип("ПолеФормы"), ЭлементДинамическийСписок);  НоваяКолонкаТаблицы.ПутьКДанным = "РеквизитСписокНоменклатура.Наименование";     НоваяКолонкаТаблицы = Элементы.Добавить("КолонкаКод", Тип("ПолеФормы"), ЭлементДинамическийСписок);  НоваяКолонкаТаблицы.ПутьКДанным = "РеквизитСписокНоменклатура.Код";       НоваяКолонкаТаблицы = Элементы.Добавить("КолонкаКоличество", Тип("ПолеФормы"), ЭлементДинамическийСписок);  НоваяКолонкаТаблицы.ПутьКДанным = "РеквизитСписокНоменклатура.Количество";КонецПроцедуры
